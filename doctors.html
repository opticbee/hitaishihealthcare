<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Doctors List</title>
</head>
<body style="font-family: Arial, sans-serif; background: #f4f4f4; padding: 20px;">


<!-- Navigation Bar -->
<nav style="display: flex; justify-content: space-between; align-items: center; background: #007bff; padding: 15px 40px;">
    
  <!-- Logo and Title -->
  <div style="display: flex; align-items: center; gap: 15px;">
      <img src="images/Hitaishi HealthCare (1).png" alt="Logo" style="height: 50px;">
      <div>
          <h2 style="color: #fff; margin: 0; font-size: 36px;">Hitaishi</h2>
          <p style="color: #fff; margin: 0; font-size: 18px;">HealthCare Service</p>
      </div>
  </div>
  
  <!-- search input icons -->
  <input type="text" placeholder="Search..." style="padding: 10px; border-radius: 5px; border: none; width: 100px; font-size: 16px;">
  <!-- <button style="background: #fff; border: none; padding: 10px 15px; border-radius: 5px; font-size: 16px; cursor: pointer;"> -->
      <i class="fas fa-search" style="margin-left: -90px; color: #fff; font-weight: bolder;"></i>

  <!-- Buttons -->
  <div style="display: flex; gap: 15px;">
      <a href="blood.html" style="background: white; color: #007bff; padding: 10px 15px; border-radius: 5px; font-size: 16px; text-decoration: none; font-weight: bold;">
          ❤️ Blood Donation
      </a>
      <a href="clinics.html" style="background: white; color: #007bff; padding: 10px 15px; border-radius: 5px; font-size: 16px; text-decoration: none; font-weight: bold;">
          Book Appointment
      </a>
      <a href="doctors.html" style="background: white; color: #007bff; padding: 10px 15px; border-radius: 5px; font-size: 16px; text-decoration: none; font-weight: bold;">
          Find a Doctor
      </a>
      <a href="clinic.html" style="background: white; color: #007bff; padding: 10px 15px; border-radius: 5px; font-size: 16px; text-decoration: none; font-weight: bold;">
          Clinic
      </a>
      <a href="eyecare.html" style="background: white; color: #007bff; padding: 10px 15px; border-radius: 5px; font-size: 16px; text-decoration: none; font-weight: bold;">
          Eye Care
      </a>
  </div>

  <!-- Social Media Icons -->
  <div style="display: flex; align-items: center; gap: 15px;">
      <a href="https://www.facebook.com/profile.php?id=61575554344989" target="_blank" style="color: white; font-size: 20px; text-decoration: none;">
          <i class="fab fa-facebook"></i>
      </a>
      <a href="https://x.com/HitaishiHealth" target="_blank" style="color: white; font-size: 20px; text-decoration: none;">
          <i class="fab fa-twitter"></i>
      </a>
      <a href="https://www.instagram.com/hitaishihealthcare/" target="_blank" style="color: white; font-size: 20px; text-decoration: none;">
          <i class="fab fa-instagram"></i>
      </a>
      <a href="https://www.linkedin.com" target="_blank" style="color: white; font-size: 20px; text-decoration: none;">
          <i class="fab fa-linkedin"></i>
      </a>
      <a href="https://www.youtube.com/@HitaishiHealthCare" target="_blank" style="color: white; font-size: 20px; text-decoration: none;">
          <i class="fab fa-youtube"></i>
      </a>
      <a href="https://t.me" target="_blank" style="color: white; font-size: 20px; text-decoration: none;">
          <i class="fab fa-telegram"></i>
      </a>
      <a href="https://www.whatsapp.com" target="_blank" style="color: white; font-size: 20px; text-decoration: none;">
          <i class="fab fa-whatsapp"></i>
      </a>
      

      <!-- Display Logged-in User Name -->
      <!--  <span id="username" style="color: white; font-size: 18px; margin-left: 15px;"></span> -->

      <!-- Profile Icon -->
      <a href="patientLogin.html" style="color: white; font-size: 22px; text-decoration: none; margin-left: 10px;">
          <i class="fas fa-user-circle"></i>
      </a>
  </div>

  </nav>
  
  <script>
      // Simulating getting user data from local storage or API
      document.addEventListener("DOMContentLoaded", function () {
          const user = localStorage.getItem("loggedInUser"); // Retrieve stored user
          if (user) {
              document.getElementById("username").textContent = user; // Show username if logged in
          }
      });
  
      // Example: Store username after login (call this after user logs in)
      function setUser(name) {
          localStorage.setItem("loggedInUser", name);
      }
  
      // Example: Clear user on logout
      function logout() {
          localStorage.removeItem("loggedInUser");
          window.location.reload(); // Refresh page after logout
      }
  </script>
  
  
  <nav style="margin-left: -50px; margin-top: -10px; background-color: #2581de; padding: 1rem 2rem; position: sticky; top: 0; box-shadow: 0px 4px 10px rgba(0,0,0,0.1); z-index: 1000;">
      <div style="display: flex; align-items: center; max-width: 1200px; margin: 0 auto;">
          <!-- Home Link -->
          <div style="margin-right: 1rem;">
              <a href="HHS.html" style="color: white; text-decoration: none; padding: 0.5rem 1rem; font-weight: bold; transition: background-color 0.3s;">Home</a>
          </div>

          <!-- Health Records Dropdown -->
          <div style="position: relative; margin-right: 1rem;">
              <a href="healthRecords.html" style="color: white; text-decoration: none;  padding: 0.5rem 1rem; font-weight: bold; transition: background-color 0.3s;">Health&nbsp;Records</a>
              <div style="display: none; position: absolute; background-color: white; min-width: 200px; box-shadow: 0px 4px 10px rgba(0,0,0,0.1); border-radius: 5px; overflow: hidden; z-index: 1001;">
                  <a href="bloodtest.html" style="color: #333; padding: 12px 16px; display: block; text-decoration: none; transition: background-color 0.3s;">Blood Tests</a>
                  <a href="donations.html" style="color: #333; padding: 12px 16px; display: block; text-decoration: none; transition: background-color 0.3s;">Donations</a>
                  <a href="inventory.html" style="color: #333; padding: 12px 16px; display: block; text-decoration: none; transition: background-color 0.3s;">Inventory</a>
              </div>
          </div>

          <!-- Diagnostics Dropdown -->
          <div style="position: relative; margin-right: 1rem;">
              <a href="Diagnostics.html" style="color: white; text-decoration: none; padding: 0.5rem 1rem; font-weight: bold; transition: background-color 0.3s;">Diagnostics</a>
              <div style="display: none; position: absolute; background-color: white; min-width: 200px; box-shadow: 0px 4px 10px rgba(0,0,0,0.1); border-radius: 5px; overflow: hidden; z-index: 1001;">
                  <a href="xray.html" style="color: #333; padding: 12px 16px; display: block; text-decoration: none; transition: background-color 0.3s;">X-Ray</a>
                  <a href="ultrasound.html" style="color: #333; padding: 12px 16px; display: block; text-decoration: none; transition: background-color 0.3s;">Ultrasound</a>
                  <a href="mri.html" style="color: #333; padding: 12px 16px; display: block; text-decoration: none; transition: background-color 0.3s;">MRI</a>
              </div>
          </div>

          <!-- Physicians Dropdown -->
          <div style="position: relative; margin-right: 1rem;">
              <a href="Physician.html" style="color: white; text-decoration: none; padding: 0.5rem 1rem; font-weight: bold; transition: background-color 0.3s;">Physicians</a>
              <div style="display: none; position: absolute; background-color: white; min-width: 200px; box-shadow: 0px 4px 10px rgba(0,0,0,0.1); border-radius: 5px; overflow: hidden; z-index: 1001;">
                  <a href="cardiologist.html" style="color: #333; padding: 12px 16px; display: block; text-decoration: none; transition: background-color 0.3s;">Cardiologist</a>
                  <a href="neuralogist.html" style="color: #333; padding: 12px 16px; display: block; text-decoration: none; transition: background-color 0.3s;">Neurologist</a>
                  <a href="dermatologist.html" style="color: #333; padding: 12px 16px; display: block; text-decoration: none; transition: background-color 0.3s;">Dermatologist</a>
              </div>
          </div>

          <!-- Fertility Dropdown -->
          <div style="position: relative; margin-right: 1rem;">
              <a href="fertility.html" style="color: white; text-decoration: none; padding: 0.5rem 1rem; font-weight: bold; transition: background-color 0.3s;">Fertility</a>
              <div style="display: none; position: absolute; background-color: white; min-width: 200px; box-shadow: 0px 4px 10px rgba(0,0,0,0.1); border-radius: 5px; overflow: hidden; z-index: 1001;">
                  <a href="IVF.html" style="color: #333; padding: 12px 16px; display: block; text-decoration: none; transition: background-color 0.3s;">IVF</a>
                  <a href="iui.html" style="color: #333; padding: 12px 16px; display: block; text-decoration: none; transition: background-color 0.3s;">IUI</a>
                  <a href="sarogasi.html" style="color: #333; padding: 12px 16px; display: block; text-decoration: none; transition: background-color 0.3s;">Surrogacy</a>
              </div>
          </div>

          <!-- AI -->
          <div style="margin-right: 1rem;">
              <a href="ai.html" style="max-width: 100px; overflow: hidden; color: white; text-decoration: none; padding: 0.5rem 0.5rem; font-weight: bold; transition: background-color 0.3s; white-space: nowrap;">AI & Blockchain</a>
          </div>

          <!-- Doctors Link -->
          <div style="margin-right: 1rem;">
              <a href="doctor.html" style="color: white; text-decoration: none; padding: 0.5rem 1rem; font-weight: bold; transition: background-color 0.3s;">Doctors</a>
          </div>

          <!-- Patients Link -->
          <div style="margin-right: 1rem;">
              <a href="patientLogin.html"  style="color: white; text-decoration: none; padding: 0.5rem 1rem; font-weight: bold; transition: background-color 0.3s;">Patients</a>
          </div>



          <!-- Insights Link -->
          <div style="margin-right: 1rem;">
              <a href="Dental.html" style="color: white; text-decoration: none; padding: 0.5rem 1rem; font-weight: bold; transition: background-color 0.3s;">Dental</a>
          </div>
          <div style="margin-right: 1rem;">
              <a href="ENT.html" style="color: white; text-decoration: none; padding: 0.5rem 1rem; font-weight: bold; transition: background-color 0.3s;">ENT</a>
          </div>

          <!-- Contact Link -->
          <div>
              <a href="contact.html" style="color: white; text-decoration: none;margin-right: 5px; padding: 0.5rem 1rem; font-weight: bold; transition: background-color 0.3s;">Contact </a>
          </div>
          
      </div>

    
  </nav>

  <!-- for dropdowns -->
  <script>
      // JavaScript to handle dropdown visibility
      document.querySelectorAll('nav > div > div').forEach(navItem => {
          const dropdown = navItem.querySelector('div');
          if (dropdown) {
              navItem.addEventListener('mouseenter', () => {
                  dropdown.style.display = 'block';
              });
              navItem.addEventListener('mouseleave', () => {
                  dropdown.style.display = 'none';
              });
          }
      });
    </script>



  <h2 style="text-align:center;">Doctors Directory</h2>

  <!-- Layout Container -->
  <div style="display: flex; gap: 30px;">

    <!-- Filter Section (Left Side) -->
    <div style="width: 25%;">
      <input 
        type="text" 
        id="searchInput" 
        placeholder="Search by Name" 
        onkeyup="filterDoctors()" 
        style="padding: 10px; width: 90%; border-radius: 5px; border: 1px solid #ccc; margin-bottom: 15px;" 
      />

      <select id="specializationFilter" onchange="filterDoctors()" style="padding: 10px; width: 100%; margin-bottom: 10px;">
        <select id="specialization-filter"></select>
      </select>

      <select id="clinicFilter" onchange="filterDoctors()" style="padding: 10px; width: 100%; margin-bottom: 10px;">
        <select id="clinic-filter"></select>
      </select>

      <select id="locationFilter" onchange="filterDoctors()" style="padding: 10px; width: 100%; margin-bottom: 10px;">
        <select id="location-filter"></select>
      </select>
    </div>

    <!-- Doctors Cards (Right Side) -->
    <div id="doctorsContainer" style="width: 75%; display: flex; flex-direction: column; gap: 20px;">
      <!-- Doctor cards will be inserted here -->
    </div>

  </div>

  <script>
    let allDoctors = [];
  
    async function fetchDoctors() {
      try {
        const res = await fetch('http://localhost:5000/api/getdoctors');
        allDoctors = await res.json();
        displayDoctors(allDoctors);
      } catch (err) {
        console.error('Failed to fetch doctors:', err);
      }
    }
  
    async function fetchFilters() {
    try {
      const res = await fetch('http://localhost:5000/api/getfilters');
      const data = await res.json(); // Expect: { specialization: [], clinic: [], address: [] }

      populateFilterOptions('specializationFilter', data.specialization);
      populateFilterOptions('clinicFilter', data.clinic);
      populateFilterOptions('locationFilter', data.address);
    } catch (err) {
      console.error('Failed to fetch filters:', err);
    }
  }

  
  function populateFilterOptions(selectId, options) {
  const select = document.getElementById(selectId);

  let defaultLabel = 'All'; // Default label for specialization filter
  if (selectId === 'clinic-filter') defaultLabel = 'All Clinics';
  else if (selectId === 'specialization-filter') defaultLabel = 'All Specializations';
  else if (selectId === 'location-filter') defaultLabel = 'All Locations';

  select.innerHTML = `<option value="">${selectId}</option>`; // Set the default text dynamically

  options.forEach(opt => {
    const option = document.createElement('option');
    option.value = opt;
    option.textContent = opt;
    select.appendChild(option);
  });
}

  
    function displayDoctors(doctors) {
      const container = document.getElementById('doctorsContainer');
      container.innerHTML = "";
  
      doctors.forEach(doc => {
        const card = document.createElement('div');
        card.className = 'doctorCard';
        card.style = `
          background: white;
          border-radius: 10px;
          box-shadow: 0 2px 10px rgba(0,0,0,0.1);
          padding: 20px;
          width: 100%;
          display: flex;
        `;
  
        const left = document.createElement('div');
        left.style = 'width: 40%; padding-right: 15px; border-right: 1px solid #eee; text-align: center;';
        left.innerHTML = `
          <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Profile" style="width: 100px; height: 100px; border-radius: 50%; margin-bottom: 10px;" />
          <h3 style="color: #2c3e50;">Dr. ${doc.first_name} ${doc.last_name}</h3>
          <p><strong>Email:</strong> ${doc.email}</p>
          <p><strong>Mobile:</strong> ${doc.mobile}</p>
          <p><strong>Specialization:</strong> ${doc.specialization}</p>
        `;
  
        const right = document.createElement('div');
        right.style = 'width: 60%; padding-left: 15px;';
        right.innerHTML = `
          <p>Dr. ${doc.first_name} ${doc.last_name} graduated with a degree in ${doc.degree} from ${doc.university}.</p>
          <p>They have ${doc.experience} years of experience in ${doc.specialization}.</p>
          <p>Currently working at ${doc.clinic} located in ${doc.address}.</p>
          <p>Available on ${doc.availability} from ${doc.from_time} to ${doc.to_time}.</p>
          <p>License Number: ${doc.license_number}</p>
          <p>Aadhar Card: ${doc.aadhar_card}</p>
          <p>${doc.additional_info}</p>
        `;
  
        card.appendChild(left);
        card.appendChild(right);
        container.appendChild(card);
      });
    }
  
    function filterDoctors() {
      const search = document.getElementById('searchInput').value.toLowerCase();
      const specialization = document.getElementById('specializationFilter').value;
      const clinic = document.getElementById('clinicFilter').value;
      const location = document.getElementById('locationFilter').value;
  
      const filtered = allDoctors.filter(doc => {
        return (
          (doc.first_name.toLowerCase().includes(search) || doc.last_name.toLowerCase().includes(search)) &&
          (specialization === '' || doc.specialization === specialization) &&
          (clinic === '' || doc.clinic === clinic) &&
          (location === '' || doc.address === location)
        );
      });
  
      displayDoctors(filtered);
    }
  
    // Call both functions when the page loads
    fetchDoctors();
    fetchFilters();
  </script>
  

</body>
</html>
